version: 2

metrics:
  - name: total_revenue_metric
    label: "Total Revenue metric"
    description: "Total revenue across all orders"
    type: simple
    type_params:
      measure: total_revenue

  - name: order_count_metric
    label: "Order Count Metric"
    description: "Total number of orders"
    type: simple
    type_params:
      measure: order_count

  - name: avg_revenue_metric
    label: "Average Revenue"
    description: "Average revenue per order"
    type: derived
    type_params:
      expr: "total_revenue_metric / NULLIF(order_count_metric, 0)"
      metrics:
        - total_revenue_metric
        - order_count_metric
